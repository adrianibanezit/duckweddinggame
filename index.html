<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>La Gran Caza de Patos</title>
  <meta name="description" content="Juego de intercambio con patos en miniatura para la boda: objetivo y reglas b√°sicas." />
  <meta name="theme-color" content="#ffd166" />
  <style>
    :root{
      --bg: #0f0f12;
      --card: rgba(255,255,255,0.06);
      --text: #e8e8e8;
      --muted: #b6b6b6;
      --accent: #ffd166; /* pastel amarillo pato */
      --accent-2: #06d6a0; /* verde menta */
      --danger: #ef476f;
      --shadow: 0 10px 30px rgba(0,0,0,0.25);
      --radius: 16px;
    }
    [data-theme="light"]{
      --bg: #fafafa;
      --card: rgba(0,0,0,0.04);
      --text: #161616;
      --muted: #555;
      --shadow: 0 8px 24px rgba(0,0,0,0.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: var(--bg);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
      line-height: 1.6;
      position: relative;
      overflow-x: hidden;
    }
    /* Add background logo */
    body::before {
      content: '';
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80vmin;
      height: 80vmin;
      background-image: url('duckgamelogo.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      opacity: 0.05;
      pointer-events: none;
      z-index: -1;
    }
    a{color:inherit}
    .container{max-width:1000px;margin:0 auto;padding:28px}
    header{
      position:sticky; top:0; z-index:20;
      backdrop-filter: saturate(1.1) blur(8px);
      background: linear-gradient(180deg, rgba(0,0,0,0.25), transparent);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      gap:16px; padding:14px 28px;
    }
    .brand{display:flex;align-items:center;gap:12px;text-decoration:none}
    .brand img {
      width: 80px;
      height: 80px;
      object-fit: contain;
      filter: none;
    }
    .brand .title{font-weight:800;letter-spacing:0.2px}
    .actions{display:flex;gap:10px;align-items:center}
    .btn{
      appearance:none; border:0; padding:10px 14px; border-radius:999px;
      background:var(--card); color:var(--text); cursor:pointer; font-weight:600;
      transition: transform .06s ease, background .2s ease, box-shadow .2s ease;
      box-shadow: var(--shadow);
    }
    .btn:hover{transform: translateY(-1px);}
    .btn-primary{background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#161616}
    .btn-ghost{background:var(--card)}
    main{padding:20px}
    .hero{
      display:grid; grid-template-columns: 1fr; gap:24px; align-items:center;
    }
    .hero .card{
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
      padding: 32px;
      background: var(--card);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    h1{font-size: clamp(28px, 4.5vw, 48px); line-height:1.15; margin:6px 0 8px}
    .kicker{display:inline-block; font-weight:700; font-size:13px; letter-spacing:.12em; text-transform:uppercase; color:var(--muted)}
    .objective{font-size: clamp(16px, 2.2vw, 18px); background:var(--card); border-radius:var(--radius); padding:16px; border:1px dashed rgba(255,255,255,0.15)}
    .pill{
      display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px;
      background:var(--card); border:1px solid rgba(255,255,255,0.08); font-size:13px; color:var(--muted);
    }
    .grid{display:grid; gap:14px}
    @media(min-width: 860px){
      .hero{
        grid-template-columns: 1fr; /* Changed from 1.2fr .8fr */
        max-width: 100%;
      }
    }
    /* Rules */
    .rules{margin-top:16px}
    .rule{
      background: var(--card); border:1px solid rgba(255,255,255,0.08);
      border-radius: calc(var(--radius) + 4px);
      padding: 14px 16px;
      transition: background .2s ease, border-color .2s ease, transform .06s ease;
    }
    .rule:hover{transform: translateY(-1px)}
    .rule summary{
      list-style:none; cursor:pointer; display:flex; align-items:flex-start; gap:12px;
      user-select:none; font-weight:700;
    }
    .rule summary::-webkit-details-marker{display:none}
    .rule .icon{font-size:20px}
    .rule .content{margin-top:10px; color:var(--text)}
    .muted{color:var(--muted)}
    .footer{
      margin:32px 0 24px; display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;
      color:var(--muted); font-size:14px
    }
    /* floating ducks */
    .float-duck {
      position: fixed;
      pointer-events: none;
      z-index: 5;
      opacity: 0.95;
      animation: rise 3s ease-out forwards; /* Aumentado de 1.8s a 3s */
      width: 40px;
      height: 40px;
      background-image: url('duckgamelogo.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      filter: drop-shadow(0 6px 12px rgba(0,0,0,0.25));
    }

    /* Modificar la animaci√≥n rise */
    @keyframes rise {
      0% { 
        transform: translateY(120vh) scale(0.8) rotate(-8deg);
        opacity: 0;
      }
      10% { opacity: 0.8 }
      80% { opacity: 0.8 } /* Mantiene la opacidad m√°s tiempo */
      100% { 
        transform: translateY(-120px) scale(1.2) rotate(8deg);
        opacity: 0;
      }
    }
    .countdown{
      display:none;
      margin-top:10px;
      font-variant-numeric: tabular-nums;
    }
    .card.notice{border-left: 6px solid var(--accent);}
    /* small helpers */
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body>
  <header>
    <nav class="nav container">
      <a class="brand" href="#" aria-label="Inicio">
        <img id="logo" src="duckgamelogo.png" alt="Isotipo del juego" />
        <span class="title">La Gran Caza de Patos</span>
      </a>
      <div class="actions">
        <button class="btn btn-ghost" id="themeToggle" aria-label="Cambiar tema">üåó</button>
        <button class="btn btn-primary" id="playBtn">¬°A jugar!</button>
      </div>
    </nav>
  </header>

  <main class="container">
    <section class="hero">
      <div class="card">
        <span class="kicker">Objetivo</span>
        <h1 id="pageTitle">¬°Consigue el mayor n√∫mero de patos!</h1>
        <p class="objective" id="objectiveText">
          Conseguir el mayor n√∫mero de patos en miniatura antes del final de la noche,
          intercambi√°ndolos por objetos, favores o retos con otros jugadores.
        </p>
        <div class="pill"><span>ü¶Ü</span> <span>Intercambia con ingenio, juega con estilo.</span></div>
        <div class="countdown" id="countdown" aria-live="polite"></div>
        <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap">
          <button class="btn btn-ghost" id="copyObjective">Copiar objetivo</button>
          <button class="btn btn-ghost" id="scrollRules">Ver reglas</button>
        </div>
      </div>
    </section>

    <section class="rules" id="rules">
      <h2 style="margin:26px 0 12px; font-size:clamp(20px,3.2vw,28px)">üìú Reglas b√°sicas</h2>
      <div class="grid">
        <details class="rule" open>
          <summary><span class="icon">üö´</span> Nada de robar patos</summary>
          <div class="content">
            Si alguien roba, pierde autom√°ticamente todos sus patos.
          </div>
        </details>

        <details class="rule">
          <summary><span class="icon">ü§ù</span> Solo valen intercambios voluntarios</summary>
          <div class="content">
            Los patos solo se consiguen mediante intercambios voluntarios entre jugadores.
          </div>
        </details>

        <details class="rule">
          <summary><span class="icon">üßæ</span> Registra cada intercambio</summary>
          <div class="content">
            Usa el talonario (recibos) y anota:<br />
            <ul>
              <li><strong>Nombre</strong> del jugador que entrega el pato</li>
              <li><strong>Nombre</strong> del jugador que lo recibe</li>
              <li><strong>‚ÄúPrecio‚Äù o intercambio</strong> (objeto, favor, reto cumplido, etc.)</li>
            </ul>
            Cada recibo debe ir firmado por ambos jugadores y quedarse en manos de quien recibe el pato.
            Esto servir√° para verificar ganadores al final.
          </div>
        </details>

        <details class="rule">
          <summary><span class="icon">1Ô∏è‚É£</span> Un intercambio a la vez</summary>
          <div class="content">
            No se puede hacer un ‚Äúpaquete‚Äù de varios patos en una sola transacci√≥n.
            As√≠ el juego es m√°s din√°mico y dura m√°s.
          </div>
        </details>

        <details class="rule">
          <summary><span class="icon">‚è≥</span> No bloquees el juego</summary>
          <div class="content">
            Si te proponen un intercambio razonable (a criterio del organizador/juez), no puedes ignorar el juego toda la noche.
          </div>
        </details>

        <details class="rule">
          <summary><span class="icon">üßÆ</span> Zona de recuento final</summary>
          <div class="content">
            Antes del baile, todos deben ir a la mesa de recuento, entregar sus patos y recibos.
            El organizador verificar√° que los intercambios sean v√°lidos.
          </div>
        </details>
      </div>
      <div style="margin-top:14px">
        <button class="btn btn-ghost" id="copyRules">Copiar reglas</button>
      </div>
    </section>

    <footer class="footer">
      <span>Hecho con üß° para una noche inolvidable.</span>
      <span class="muted">Tip: pulsa ‚Äú¬°A jugar!‚Äù para una lluvia de patitos.</span>
    </footer>
  </main>

  <script>
    // Helpers
    const $ = (sel, ctx=document) => ctx.querySelector(sel);
    const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));

    // Theme toggle with persistence
    const themeKey = "duck_theme";
    const saved = localStorage.getItem(themeKey);
    if(saved){ document.documentElement.setAttribute('data-theme', saved); }
    $("#themeToggle").addEventListener("click", () => {
      const current = document.documentElement.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
      document.documentElement.setAttribute('data-theme', current);
      localStorage.setItem(themeKey, current);
      spawnDucks(6);
    });

    // Smooth scroll to rules
    $("#scrollRules").addEventListener("click", () => {
      $("#rules").scrollIntoView({ behavior: "smooth", block: "start" });
    });

    // Copy buttons
    const copy = async (text) => {
      try { await navigator.clipboard.writeText(text.trim()); feedback("¬°Copiado!"); }
      catch { feedback("No se pudo copiar"); }
    };
    $("#copyObjective").addEventListener("click", () => copy($("#objectiveText").innerText));
    $("#copyRules").addEventListener("click", () => {
      const txt = $$("#rules .rule").map(d => {
        const title = d.querySelector("summary").innerText.trim();
        const content = d.querySelector(".content").innerText.trim();
        return `‚Ä¢ ${title}\n  ${content}`;
      }).join("\n\n");
      copy(txt);
    });

    // Fun: floating ducks
    const emojis = ["ü¶Ü","ü™ø"];
    function spawnDucks(n=12){
      for(let i=0;i<n;i++){
        const span = document.createElement("span");
        span.className = "float-duck";
        span.textContent = emojis[Math.floor(Math.random()*emojis.length)];
        const x = Math.random() * window.innerWidth;
        const y = window.scrollY + 80 + Math.random()*60;
        span.style.left = x + "px";
        span.style.top = y + "px";
        span.style.fontSize = (20 + Math.random()*26) + "px";
        document.body.appendChild(span);
        setTimeout(()=> span.remove(), 1400);
      }
    }
    $("#playBtn").addEventListener("click", ()=> spawnDucks(18));

    // Feedback (small toast-ish)
    function feedback(message){
      const el = document.createElement("div");
      el.setAttribute("role","status");
      el.style.position = "fixed";
      el.style.zIndex = 40;
      el.style.bottom = "18px";
      el.style.left = "50%";
      el.style.transform = "translateX(-50%)";
      el.style.padding = "10px 14px";
      el.style.borderRadius = "999px";
      el.style.background = "linear-gradient(135deg, var(--accent), var(--accent-2))";
      el.style.color = "#161616";
      el.style.fontWeight = "700";
      el.style.boxShadow = "var(--shadow)";
      el.textContent = message;
      document.body.appendChild(el);
      setTimeout(()=> el.remove(), 1500);
    }

    // URL params: logo, titulo, deadline, color
    const params = new URLSearchParams(location.search);
    if(params.has("logo")){
      $("#logo").src = decodeURIComponent(params.get("logo"));
    }
    if(params.has("titulo")){
      const t = decodeURIComponent(params.get("titulo"));
      $("#pageTitle").textContent = t;
      $(".brand .title").textContent = t;
      document.title = t;
    }
    if(params.has("color")){
      document.documentElement.style.setProperty("--accent", decodeURIComponent(params.get("color")));
    }

    // Optional: countdown if ?deadline=YYYY-MM-DDTHH:mm
    if(params.has("deadline")){
      const ctn = $("#countdown");
      let target = new Date(params.get("deadline"));
      if(!isNaN(target)){
        ctn.style.display = "block";
        const tick = () => {
          const now = new Date();
          let diff = target - now;
          if(diff <= 0){ ctn.textContent = "¬°Hora del recuento!"; return; }
          const s = Math.floor(diff/1000)%60;
          const m = Math.floor(diff/60000)%60;
          const h = Math.floor(diff/3600000)%24;
          const d = Math.floor(diff/86400000);
          ctn.textContent = `Cuenta atr√°s: ${d}d ${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
          requestAnimationFrame(()=> setTimeout(tick, 500));
        };
        tick();
      }
    }

    // Respect reduced motion
    if (window.matchMedia("(prefers-reduced-motion: reduce)").matches) {
      document.querySelectorAll(".float-duck").forEach(el => el.style.animation = "none");
    }
  </script>
</body>
</html>
